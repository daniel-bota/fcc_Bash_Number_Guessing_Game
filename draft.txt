CREATE DATABASE number_guess;

CREATE TABLE users(user_id SERIAL PRIMARY KEY, username VARCHAR(22));

CREATE TABLE games(game_id SERIAL PRIMARY KEY, user_id INT, number_of_guesses INT, secret_number INT);
ALTER TABLE games ADD FOREIGN KEY(user_id) REFERENCES users(user_id);

TRUNCATE guesses_temp, guesses, games, users CASCADE;


CREATE TABLE guesses(guess_id SERIAL, game_id INT, user_id INT, nth_game INT, criteria VARCHAR(20), input VARCHAR);
ALTER TABLE guesses ADD FOREIGN KEY(game_id) REFERENCES games(game_id);
ALTER TABLE guesses ADD FOREIGN KEY(user_id) REFERENCES users(user_id);


CREATE TABLE guesses(guess_id SERIAL PRIMARY KEY, game_id INT, guess VARCHAR(50));




SELECT * FROM guesses FULL JOIN games USING (game_id) WHERE game_id=11;

SELECT MAX(game_id) FROM (SELECT * FROM games WHERE user_id=66 ORDER BY game_id DESC LIMIT 1) as latest_games;